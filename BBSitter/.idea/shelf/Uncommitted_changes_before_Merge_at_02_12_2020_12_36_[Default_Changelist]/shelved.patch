Index: app/src/main/java/com/bbsitter/bbsitter/OpcionesMenu/Inicio/InicioFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.bbsitter.bbsitter.OpcionesMenu.Inicio;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\nimport androidx.fragment.app.FragmentTransaction;\r\nimport androidx.lifecycle.ViewModelProviders;\r\nimport androidx.viewpager2.widget.ViewPager2;\r\n\r\nimport com.bbsitter.bbsitter.OpcionesMenu.Chats.RoomChatFamiliaFragment;\r\nimport com.bbsitter.bbsitter.OpcionesMenuCanguro.Inicio.MapsFragmentCanguros;\r\nimport com.bbsitter.bbsitter.PagerAdapter;\r\nimport com.bbsitter.bbsitter.R;\r\nimport com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.android.material.tabs.TabLayoutMediator;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\npublic class InicioFragment extends Fragment {\r\n\r\n    private InicioViewModel inicioViewModel;\r\n\r\n    // TABLAYOUT para ver tanto la lista como el Map\r\n    private ViewPager2 viewPager2;\r\n    private TabLayout tabLayout;\r\n    TabLayoutMediator tabLayoutMediator;\r\n\r\n    private ExtendedFloatingActionButton btnMostrarMapa;\r\n\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseFirestore bbdd;\r\n\r\n    public View onCreateView(@NonNull LayoutInflater inflater,\r\n                             ViewGroup container, Bundle savedInstanceState) {\r\n\r\n        inicioViewModel = ViewModelProviders.of(this).get(InicioViewModel.class);\r\n\r\n\r\n        View view = inflater.inflate(R.layout.fragment_home, container, false);\r\n\r\n        btnMostrarMapa = view.findViewById(R.id.btnMostrarMapa);\r\n\r\n        btnMostrarMapa.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                cargarFragment(new MapsFragmentCanguros());\r\n\r\n            }\r\n        });\r\n\r\n        viewPager2 = view.findViewById(R.id.viewPagerTab);\r\n\r\n        viewPager2.setAdapter(new PagerAdapter(this));\r\n\r\n        tabLayout = view.findViewById(R.id.tabLayoutCanguros);\r\n\r\n        tabLayoutMediator = new TabLayoutMediator(tabLayout, viewPager2, new TabLayoutMediator.TabConfigurationStrategy() {\r\n            @Override\r\n            public void onConfigureTab(@NonNull TabLayout.Tab tab, int position) {\r\n                switch (position){\r\n                    case 0: {\r\n                        tab.setText(\"Novedades\");\r\n                        //tab.setIcon(R.drawable.ic_baseline_filter_list_24);\r\n                        break;\r\n                    }\r\n                    case 1: {\r\n                        tab.setText(\"Los más cercanos\");\r\n                        //tab.setIcon(R.drawable.ic_baseline_add_location_24);\r\n                        break;\r\n                    }\r\n                    case 2: {\r\n                        tab.setText(\"Los más valiosos\");\r\n                        //tab.setIcon(R.drawable.ic_baseline_add_location_24);\r\n                        break;\r\n                    }\r\n\r\n                }\r\n            }\r\n        });\r\n        tabLayoutMediator.attach();\r\n\r\n\r\n        return view;\r\n    }\r\n    private void cargarFragment(Fragment fragment){\r\n        FragmentManager fm = getActivity().getSupportFragmentManager();\r\n        FragmentTransaction fragmentTransaction=fm.beginTransaction();\r\n        fragmentTransaction.replace(R.id.nav_host_fragment, fragment);\r\n        fragmentTransaction.commit();\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bbsitter/bbsitter/OpcionesMenu/Inicio/InicioFragment.java	(revision 28350bd8306d52387ecedf0bf25b70dc30374b64)
+++ app/src/main/java/com/bbsitter/bbsitter/OpcionesMenu/Inicio/InicioFragment.java	(date 1606849205397)
@@ -71,12 +71,12 @@
                         break;
                     }
                     case 1: {
-                        tab.setText("Los más cercanos");
+                        tab.setText("Los más valorados");
                         //tab.setIcon(R.drawable.ic_baseline_add_location_24);
                         break;
                     }
                     case 2: {
-                        tab.setText("Los más valiosos");
+                        tab.setText("Los más baratos");
                         //tab.setIcon(R.drawable.ic_baseline_add_location_24);
                         break;
                     }
Index: app/src/main/res/layout/activity_crear_perfil_canguro.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    android:gravity=\"center_horizontal\"\r\n    android:background=\"@android:color/white\"\r\n    tools:context=\".Perfiles.CrearPerfilCanguro\">\r\n\r\n    // Titulo:Estas creando...\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"40dp\"\r\n        android:paddingTop=\"10dp\"\r\n        android:background=\"@drawable/cabeceracrearperfilcanguro\"\r\n        >\r\n\r\n        <TextView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:text=\"Estas creando tu perfil de canguro\"\r\n            android:textAlignment=\"center\"\r\n            android:textColor=\"@android:color/white\"\r\n            android:textSize=\"14dp\"\r\n            android:textStyle=\"bold\" />\r\n\r\n    </LinearLayout>\r\n\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:background=\"@android:color/transparent\">\r\n\r\n        // Dentro del ScrollView debe haber un LinearLayout que englobe a todo\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center_horizontal\"\r\n            android:orientation=\"vertical\">\r\n\r\n            // Añadir foto\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"180dp\"\r\n                android:background=\"@drawable/fondocabecerafamilia\"\r\n                android:gravity=\"center_horizontal\"\r\n                android:orientation=\"vertical\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_marginHorizontal=\"25dp\"\r\n                android:paddingVertical=\"10dp\">\r\n\r\n                <de.hdodenhof.circleimageview.CircleImageView\r\n                android:id=\"@+id/imageCanguro\"\r\n                android:layout_width=\"110dp\"\r\n                android:layout_height=\"110dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:elevation=\"2dp\"\r\n                android:src=\"@drawable/fotoperfil\"\r\n                app:civ_border_color=\"@android:color/white\"\r\n                app:civ_border_width=\"2dp\"/>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"center_horizontal\"\r\n                    android:layout_marginHorizontal=\"50dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:text=\"Añade tu foto de perfil\"\r\n                    android:textAlignment=\"center\"\r\n                    android:textColor=\"@color/colorPrimary\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n            </LinearLayout>\r\n\r\n            // Layout Datos Personales: Nombre, apellidos, fecha de Nacimiento y Sexo\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:text=\"Datos personales\"\r\n                android:textColor=\"@color/colorPrimaryDark\"\r\n                android:textSize=\"16dp\"\r\n                android:textStyle=\"bold\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginVertical=\"10dp\"\r\n                android:background=\"@drawable/marcoblancobutton\"\r\n                android:elevation=\"2dp\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n                android:paddingVertical=\"10dp\">\r\n\r\n                // NOMBRE EditText de Material Design\r\n\r\n                <com.google.android.material.textfield.TextInputLayout\r\n                    android:id=\"@+id/nombre_edit_text\"\r\n                    android:layout_width=\"300dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_margin=\"4dp\"\r\n                    android:background=\"@android:color/transparent\"\r\n                    android:hint=\"Nombre\"\r\n                    android:textColorHint=\"@android:color/darker_gray\"\r\n                    app:boxBackgroundMode=\"outline\"\r\n                    app:boxStrokeColor=\"@color/colorPrimaryDark\"\r\n                    app:errorIconDrawable=\"@android:drawable/stat_notify_error\"\r\n                    app:errorIconTint=\"@android:color/holo_red_dark\"\r\n                    app:placeholderTextColor=\"@color/colorPrimaryDark\"\r\n                    app:startIconTint=\"@color/colorPrimaryDark\">\r\n\r\n                    <com.google.android.material.textfield.TextInputEditText\r\n                        android:id=\"@+id/etNombre\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:inputType=\"text\"\r\n                        android:maxLines=\"1\"\r\n                        android:textColor=\"@color/colorPrimaryDark\"\r\n                        android:textColorHint=\"@android:color/darker_gray\" />\r\n\r\n                </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                // apellidos EditText de Material Design\r\n\r\n                <com.google.android.material.textfield.TextInputLayout\r\n                    android:id=\"@+id/apellidos_edit_text\"\r\n                    android:layout_width=\"300dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_margin=\"4dp\"\r\n                    android:background=\"@android:color/transparent\"\r\n                    android:hint=\"Apellidos\"\r\n                    android:textColorHint=\"@android:color/darker_gray\"\r\n                    app:boxBackgroundMode=\"outline\"\r\n                    app:boxStrokeColor=\"@android:color/darker_gray\"\r\n                    app:errorIconDrawable=\"@android:drawable/stat_notify_error\"\r\n                    app:errorIconTint=\"@android:color/holo_red_dark\"\r\n                    app:startIconTint=\"@color/colorPrimaryDark\">\r\n\r\n                    <com.google.android.material.textfield.TextInputEditText\r\n                        android:id=\"@+id/etApellidos\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:inputType=\"textEmailAddress\"\r\n                        android:maxLines=\"1\"\r\n                        android:textColor=\"@color/colorPrimaryDark\"\r\n                        android:textColorHint=\"@android:color/darker_gray\" />\r\n                </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                // Fecha EditText de Material Design\r\n\r\n                <com.google.android.material.textfield.TextInputLayout\r\n                    android:id=\"@+id/FechaNacimiento_edit_text\"\r\n                    android:layout_width=\"300dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_margin=\"4dp\"\r\n                    android:background=\"@android:color/transparent\"\r\n                    android:hint=\"Fecha de Nacimiento\"\r\n                    android:textColorHint=\"@android:color/darker_gray\"\r\n                    app:boxBackgroundMode=\"outline\"\r\n                    app:boxStrokeColor=\"@android:color/darker_gray\"\r\n                    app:errorIconDrawable=\"@android:drawable/stat_notify_error\"\r\n                    app:errorIconTint=\"@android:color/holo_red_dark\"\r\n                    app:startIconDrawable=\"@drawable/ic_baseline_calendar_today_36\"\r\n                    app:startIconTint=\"@color/colorPrimaryDark\">\r\n\r\n                    <com.google.android.material.textfield.TextInputEditText\r\n                        android:id=\"@+id/etFechaNacimiento\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:inputType=\"textEmailAddress\"\r\n                        android:maxLines=\"1\"\r\n                        android:paddingBottom=\"20dp\"\r\n                        android:textColor=\"@color/colorPrimaryDark\"\r\n                        android:textColorHint=\"@android:color/darker_gray\" />\r\n                </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                // Radio buttons SEXO\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginHorizontal=\"30dp\"\r\n                    android:layout_marginVertical=\"10dp\"\r\n                    android:background=\"@drawable/marcoblancobutton\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_gravity=\"center_horizontal\"\r\n                        android:paddingTop=\"12dp\"\r\n                        android:text=\"Sexo\"\r\n                        android:textColor=\"@android:color/darker_gray\"\r\n                        android:textSize=\"16dp\"\r\n                        android:textStyle=\"bold\" />\r\n\r\n                    <RadioGroup\r\n                        android:id=\"@+id/radioGroupSexo\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginLeft=\"20dp\"\r\n                        android:checkedButton=\"@+id/radio_button_1\"\r\n                        android:orientation=\"horizontal\">\r\n\r\n                        <RadioButton\r\n                            android:id=\"@+id/radio_button_Masculino\"\r\n                            android:layout_width=\"119dp\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:text=\"Femenino\"\r\n                            android:textColor=\"@android:color/darker_gray\"\r\n                            android:textSize=\"14dp\" />\r\n\r\n                        <RadioButton\r\n                            android:id=\"@+id/radio_button_Femenino\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:text=\"Masculino\"\r\n                            android:textColor=\"@android:color/darker_gray\"\r\n                            android:textSize=\"14dp\" />\r\n                    </RadioGroup>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            // Layout Direccion\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:text=\"¿Cuál es tu dirección?\"\r\n                android:textColor=\"@color/colorPrimaryDark\"\r\n                android:textSize=\"16dp\"\r\n                android:textStyle=\"bold\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginVertical=\"10dp\"\r\n                android:background=\"@drawable/marcoblancobutton\"\r\n                android:elevation=\"2dp\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n                android:paddingVertical=\"10dp\">\r\n\r\n                // Direccion EditText de Material Design\r\n\r\n                <com.google.android.material.textfield.TextInputLayout\r\n                    android:id=\"@+id/direccion_edit_text\"\r\n                    android:layout_width=\"300dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_margin=\"4dp\"\r\n                    android:background=\"@android:color/transparent\"\r\n                    android:hint=\"Introduce tu dirección\"\r\n                    android:textColorHint=\"@android:color/darker_gray\"\r\n                    app:boxBackgroundMode=\"outline\"\r\n                    app:boxStrokeColor=\"@android:color/darker_gray\"\r\n                    app:errorIconDrawable=\"@android:drawable/stat_notify_error\"\r\n                    app:errorIconTint=\"@android:color/holo_red_dark\"\r\n                    app:startIconDrawable=\"@drawable/ic_baseline_location_on_36\"\r\n                    app:startIconTint=\"@color/colorPrimaryDark\">\r\n\r\n                    <com.google.android.material.textfield.TextInputEditText\r\n                        android:id=\"@+id/etDireccion\"\r\n                        android:layout_width=\"300dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:inputType=\"text\"\r\n                        android:maxLines=\"1\"\r\n                        android:textColor=\"@color/colorPrimaryDark\"\r\n                        android:textColorHint=\"@android:color/darker_gray\" />\r\n                </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            // Layout Precio/hora\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:text=\"¿Cuánto cobrarias por hora?\"\r\n                android:textColor=\"@color/colorPrimaryDark\"\r\n                android:textSize=\"16dp\"\r\n                android:textStyle=\"bold\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginVertical=\"10dp\"\r\n                android:background=\"@drawable/marcoblancobutton\"\r\n                android:elevation=\"2dp\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n                android:paddingHorizontal=\"20dp\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"351dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginHorizontal=\"10dp\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:text=\"Precio/hora\"\r\n                        android:textColor=\"@android:color/darker_gray\"\r\n                        android:textSize=\"16dp\"\r\n                        android:textStyle=\"bold\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textViewPrecioHora\"\r\n                        android:layout_width=\"94dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:layout_marginLeft=\"110dp\"\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:gravity=\"end\"\r\n                        android:text=\"0€\"\r\n                        android:textColor=\"@color/colorPrimaryDark\"\r\n                        android:textSize=\"32dp\"\r\n                        android:textStyle=\"bold\" />\r\n\r\n                </LinearLayout>\r\n\r\n                // Slider Material Design Precio hora\r\n\r\n                <com.google.android.material.slider.Slider\r\n                    android:id=\"@+id/slider_precio_hora\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:stepSize=\"0.5\"\r\n                    android:valueFrom=\"0.0\"\r\n                    android:valueTo=\"40.0\" />\r\n\r\n            </LinearLayout>\r\n\r\n            // Radio Buttons EXPERIENCIA\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:text=\"¿Cuál es tu experiencia con niños?\"\r\n                android:textColor=\"@color/colorPrimaryDark\"\r\n                android:textSize=\"16dp\"\r\n                android:textStyle=\"bold\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginVertical=\"10dp\"\r\n                android:background=\"@drawable/marcoblancobutton\"\r\n                android:elevation=\"2dp\"\r\n                android:gravity=\"left\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginHorizontal=\"30dp\"\r\n                    android:layout_marginVertical=\"10dp\"\r\n                    android:background=\"@drawable/marcoblancobutton\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"horizontal\">\r\n\r\n                    <RadioGroup\r\n                        android:id=\"@+id/radioGroupExperiencia\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:checkedButton=\"@+id/radio_button_1\"\r\n                        android:orientation=\"vertical\">\r\n\r\n                        <RadioButton\r\n                            android:id=\"@+id/radio_button_Menos6meses\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:text=\"Menos de 6 meses\"\r\n                            android:textColor=\"@android:color/darker_gray\"\r\n                            android:textSize=\"14dp\" />\r\n\r\n                        <RadioButton\r\n                            android:id=\"@+id/radio_button_6a12meses\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:text=\"De 6 a 12 meses\"\r\n                            android:textColor=\"@android:color/darker_gray\"\r\n                            android:textSize=\"14dp\" />\r\n\r\n                        <RadioButton\r\n                            android:id=\"@+id/radio_button_1a2años\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:text=\"De 1 a 2 años\"\r\n                            android:textColor=\"@android:color/darker_gray\"\r\n                            android:textSize=\"14dp\" />\r\n\r\n                        <RadioButton\r\n                            android:id=\"@+id/radio_button_2a5años\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:text=\"De 2 a 5 años\"\r\n                            android:textColor=\"@android:color/darker_gray\"\r\n                            android:textSize=\"14dp\" />\r\n\r\n                        <RadioButton\r\n                            android:id=\"@+id/radio_button_Mas6años\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:text=\"Más de 6 años\"\r\n                            android:textColor=\"@android:color/darker_gray\"\r\n                            android:textSize=\"14dp\" />\r\n                    </RadioGroup>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            // Checkbox Preferencia edades\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:text=\"¿Qué edades prefieres cuidar?\"\r\n                android:textColor=\"@color/colorPrimaryDark\"\r\n                android:textSize=\"16dp\"\r\n                android:textStyle=\"bold\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginVertical=\"10dp\"\r\n                android:background=\"@drawable/marcoblancobutton\"\r\n                android:elevation=\"2dp\"\r\n                android:gravity=\"left\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <ListView\r\n                    android:id=\"@+id/listViewPrefrenciaEdad\"\r\n                    android:layout_width=\"281dp\"\r\n                    android:layout_height=\"200dp\"\r\n                    android:layout_gravity=\"center\"\r\n                    android:layout_marginVertical=\"30dp\"\r\n                    android:background=\"@color/colorPrimaryDark\"\r\n                    android:choiceMode=\"multipleChoice\" />\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            // Checkbox Pluses\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:text=\"Todo canguro tiene sus pluses, ¿Cuales tienes?\"\r\n                android:textColor=\"@color/colorPrimaryDark\"\r\n                android:textSize=\"16dp\"\r\n                android:textStyle=\"bold\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginVertical=\"10dp\"\r\n                android:background=\"@drawable/marcoblancobutton\"\r\n                android:elevation=\"2dp\"\r\n                android:gravity=\"left\"\r\n                android:orientation=\"vertical\">\r\n\r\n\r\n                <ListView\r\n                    android:id=\"@+id/listViewPluses\"\r\n                    android:layout_width=\"281dp\"\r\n                    android:layout_height=\"250dp\"\r\n                    android:layout_gravity=\"center\"\r\n                    android:layout_marginVertical=\"30dp\"\r\n                    android:background=\"@color/colorPrimaryDark\"\r\n                    android:choiceMode=\"multipleChoice\" />\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            // Checkbox Idiomas\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:text=\"¿Qué idiomas hablas?\"\r\n                android:textColor=\"@color/colorPrimaryDark\"\r\n                android:textSize=\"16dp\"\r\n                android:textStyle=\"bold\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginVertical=\"10dp\"\r\n                android:background=\"@drawable/marcoblancobutton\"\r\n                android:elevation=\"2dp\"\r\n                android:gravity=\"left\"\r\n                android:orientation=\"vertical\">\r\n\r\n\r\n                <ListView\r\n                    android:id=\"@+id/listViewIdiomas\"\r\n                    android:layout_width=\"281dp\"\r\n                    android:layout_height=\"250dp\"\r\n                    android:layout_gravity=\"center\"\r\n                    android:layout_marginVertical=\"30dp\"\r\n                    android:choiceMode=\"multipleChoice\"\r\n                    android:background=\"@color/colorPrimaryDark\"\r\n                    />\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            // Layout Direccion\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:text=\"Escribe una pequeña presentación tuya\"\r\n                android:textColor=\"@color/colorPrimaryDark\"\r\n                android:textSize=\"16dp\"\r\n                android:textStyle=\"bold\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginVertical=\"10dp\"\r\n                android:background=\"@drawable/marcoblancobutton\"\r\n                android:elevation=\"2dp\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\"\r\n                android:paddingVertical=\"10dp\">\r\n\r\n                // Direccion EditText de Material Design\r\n\r\n                <com.google.android.material.textfield.TextInputLayout\r\n                    android:id=\"@+id/descripcion_edit_text\"\r\n                    android:layout_width=\"300dp\"\r\n                    android:layout_height=\"160dp\"\r\n                    android:layout_margin=\"4dp\"\r\n                    android:background=\"@android:color/transparent\"\r\n                    android:hint=\"Escribe tu descripción\"\r\n                    android:textColorHint=\"@android:color/darker_gray\"\r\n                    app:boxBackgroundMode=\"outline\"\r\n                    app:boxStrokeColor=\"@android:color/darker_gray\"\r\n                    app:counterEnabled=\"true\"\r\n                    app:counterMaxLength=\"200\"\r\n                    app:counterTextColor=\"@android:color/darker_gray\"\r\n                    app:errorIconDrawable=\"@android:drawable/stat_notify_error\"\r\n                    app:errorIconTint=\"@android:color/holo_red_dark\">\r\n\r\n                    <com.google.android.material.textfield.TextInputEditText\r\n                        android:id=\"@+id/etDescripcion\"\r\n                        android:layout_width=\"300dp\"\r\n                        android:layout_height=\"130dp\"\r\n                        android:gravity=\"top\"\r\n                        android:inputType=\"textMultiLine\"\r\n                        android:maxLines=\"10\"\r\n                        android:scrollbars=\"vertical\"\r\n                        android:textColor=\"@color/colorPrimaryDark\"\r\n                        android:textColorHint=\"@android:color/darker_gray\" />\r\n                </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            // Boton crear canguro\r\n\r\n            <Button\r\n                android:id=\"@+id/btnCrearPerfilCanguro\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginHorizontal=\"30dp\"\r\n                android:layout_marginTop=\"20sp\"\r\n                android:layout_marginBottom=\"20dp\"\r\n                android:background=\"@drawable/botonredondeadopurpledark\"\r\n                android:text=\"Crear perfil\"\r\n                android:textAllCaps=\"true\"\r\n                android:textColor=\"@android:color/white\"\r\n                android:textSize=\"18sp\"\r\n                android:textStyle=\"bold\" />\r\n\r\n        </LinearLayout>\r\n\r\n    </ScrollView>\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_crear_perfil_canguro.xml	(revision 28350bd8306d52387ecedf0bf25b70dc30374b64)
+++ app/src/main/res/layout/activity_crear_perfil_canguro.xml	(date 1606849747015)
@@ -349,9 +349,9 @@
                     android:layout_width="match_parent"
                     android:layout_height="match_parent"
                     android:layout_marginTop="10dp"
-                    android:stepSize="0.5"
-                    android:valueFrom="0.0"
-                    android:valueTo="40.0" />
+                    android:stepSize="0.50"
+                    android:valueFrom="5.00"
+                    android:valueTo="25.00" />
 
             </LinearLayout>
 
Index: app/src/main/java/com/bbsitter/bbsitter/Perfiles/CrearPerfilCanguro.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.bbsitter.bbsitter.Perfiles;\r\n\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.provider.MediaStore;\r\nimport android.view.View;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.DatePicker;\r\nimport android.widget.ListView;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.annotation.RequiresApi;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.bbsitter.bbsitter.Main.MainActivityCanguro;\r\nimport com.bbsitter.bbsitter.R;\r\nimport com.google.android.gms.common.api.Status;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.libraries.places.api.Places;\r\nimport com.google.android.libraries.places.api.model.Place;\r\nimport com.google.android.libraries.places.widget.Autocomplete;\r\nimport com.google.android.libraries.places.widget.AutocompleteActivity;\r\nimport com.google.android.libraries.places.widget.model.AutocompleteActivityMode;\r\nimport com.google.android.material.slider.Slider;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.SetOptions;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Arrays;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\nimport es.dmoral.toasty.Toasty;\r\n\r\npublic class CrearPerfilCanguro extends AppCompatActivity {\r\n\r\n    private final String KEY_API_GOOGLE = \"AIzaSyCAq5pFIif49ezgqjq4x6ZEaFMyuGXnCH0\";\r\n\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseFirestore bbdd;\r\n    private StorageReference storageReference;\r\n\r\n    private CircleImageView foto;\r\n    private TextInputLayout nombre, apellidos, fechaNacimiento, direccion;\r\n    private TextInputEditText etNombre, etApellidos, etDireccion, etFechaNacimiento, etDescripcion;\r\n    private TextView precioHora;\r\n    private Slider sliderPrecio;\r\n    private Button btnCrearCanguro;\r\n\r\n    private Uri uriFoto;\r\n    private String urlFotoPerfil =\"\";\r\n\r\n    private LatLng latLng;\r\n\r\n    private int edadCanguro;\r\n\r\n    private double precioHoraCanguro;\r\n    private RadioGroup radioGroupSexo;\r\n    private RadioButton rbMasculino, rbFemenino, rbMenos6Meses, rb6a12meses, rb1a2años, rb2a6años, rbMas6años ;\r\n\r\n    /*\r\n    private CheckBox checkbox_6a12meses, checkbox_1a3años,checkbox_3a6años, checkbox_mas6años;\r\n    private CheckBox checkBoxEspañol, checkBoxIngles,checkBoxFrances, checkBoxAleman, checkBoxOtros;\r\n    private CheckBox checkBoxNoFumador, checkBoxCarnetConducir,checkBoxPrimerosAuxilios, checkBoxCocinar, checkBoxDeberes;\r\n    */\r\n\r\n    // Para crear los checkbox y podamos  marcarlos y enviar a la base de datos, aquellos que esten mrcados\r\n    ListView listViewPluses, listViewPreferencias, listViewIdiomas;\r\n    ArrayAdapter<String> adapterPrefrencias, adapterPulses, adapterIdiomas;\r\n    String [] arrayPreferencias = {\"De 6 a 12 meses\", \"De 1 a 3 años\", \"De 3 a 6 años\",\"Más de 6 años\"};\r\n    String [] arrayPluses = {\"No soy fumador\", \"Carnet de conducir\", \"Sé primeros auxilios\",\"Puedo cocinar\", \"Ayudo con los deberes\"};\r\n    String [] arrayIdiomas = {\"Español\", \"Inglés\", \"Francés\",\"Alemán\", \"Otros\"};\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_crear_perfil_canguro);\r\n\r\n        // FIREBASE\r\n        mAuth = FirebaseAuth.getInstance();\r\n        bbdd = FirebaseFirestore.getInstance();\r\n        storageReference = FirebaseStorage.getInstance().getReference();\r\n\r\n        // Asignacion de variables\r\n        foto = findViewById(R.id.imageCanguro);\r\n        nombre = findViewById(R.id.nombre_edit_text);\r\n        apellidos = findViewById(R.id.apellidos_edit_text);\r\n        fechaNacimiento = findViewById(R.id.FechaNacimiento_edit_text);\r\n        direccion = findViewById(R.id.direccion_edit_text);\r\n        etNombre = findViewById(R.id.etNombre);\r\n        etApellidos = findViewById(R.id.etApellidos);\r\n        etDireccion = findViewById(R.id.etDireccion);\r\n        etFechaNacimiento = findViewById(R.id.etFechaNacimiento);\r\n        etDescripcion = findViewById(R.id.etDescripcion);\r\n        precioHora = findViewById(R.id.textViewPrecioHora);\r\n\r\n        // RADIO BUTTONS SEXO\r\n        radioGroupSexo = findViewById(R.id.radioGroupSexo);\r\n        rbMasculino = findViewById(R.id.radio_button_Masculino);\r\n        rbFemenino = findViewById(R.id.radio_button_Femenino);\r\n\r\n        // RADIO BUTTONS EXPERIENCIA\r\n        rbMenos6Meses = findViewById(R.id.radio_button_Menos6meses);\r\n        rb1a2años = findViewById(R.id.radio_button_1a2años);\r\n        rb6a12meses = findViewById(R.id.radio_button_6a12meses);\r\n        rb2a6años = findViewById(R.id.radio_button_2a5años);\r\n        rbMas6años = findViewById(R.id.radio_button_Mas6años);\r\n\r\n        // ListView Checkboxs PREFERENCIAS\r\n        listViewPreferencias = findViewById(R.id.listViewPrefrenciaEdad);\r\n        adapterPrefrencias = new ArrayAdapter<>(this, android.R.layout.simple_list_item_multiple_choice, arrayPreferencias);\r\n        listViewPreferencias.setAdapter(adapterPrefrencias);\r\n\r\n\r\n        // ListView Checkboxs PLUSES\r\n        listViewPluses = findViewById(R.id.listViewPluses);\r\n        adapterPulses = new ArrayAdapter<>(this, android.R.layout.simple_list_item_multiple_choice, arrayPluses);\r\n        listViewPluses.setAdapter(adapterPulses);\r\n        listViewPluses.setBackgroundColor(Color.GRAY);\r\n\r\n        // ListView Checkboxs IDIOMAS\r\n        listViewIdiomas = findViewById(R.id.listViewIdiomas);\r\n        adapterIdiomas = new ArrayAdapter<>(this, android.R.layout.simple_list_item_multiple_choice, arrayIdiomas);\r\n        listViewIdiomas.setAdapter(adapterIdiomas);\r\n        listViewIdiomas.setBackgroundColor(Color.GRAY);\r\n\r\n        // SLIDER\r\n        sliderPrecio = findViewById(R.id.slider_precio_hora);\r\n\r\n        // BOTON CREAR CANGURO\r\n        btnCrearCanguro = findViewById(R.id.btnCrearPerfilCanguro);\r\n\r\n        // PROGRESS BAR con animacion Lottie\r\n        final ProgressBarCrearPerfil progressBarCrearPerfil = new ProgressBarCrearPerfil(CrearPerfilCanguro.this);\r\n\r\n        // Campo Precio/hora. SLIDER precio de la hora, mostramos el precio que va eligiendo el usuario\r\n        sliderPrecio.addOnChangeListener(new Slider.OnChangeListener() {\r\n            @Override\r\n            public void onValueChange(@NonNull Slider slider, float value, boolean fromUser) {\r\n                //String precio = String.valueOf(value);\r\n                precioHora.setText(value + \" €\");\r\n                precioHoraCanguro = value;\r\n            }\r\n        });\r\n\r\n\r\n        // Campo Fecha Nacimiento\r\n        establecerFechaNacimiento();\r\n\r\n        // Campo Direccion\r\n        establecerAutocompletadoDireccion();\r\n\r\n        // Cargaremos la foto de perfil, obtenida de la memoria del movil\r\n        foto.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                cargarImagen();\r\n            }\r\n        });\r\n\r\n        // Accion BOTON CREAR CANGURO\r\n        // Donde guardaremos en Firestore un objeto Canguro. Todos los datos recogidos de los campos del formulario\r\n        btnCrearCanguro.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n            // Si todos los campos estan rellenados correctamente, validación a true\r\n             if(validacionCampos()) {\r\n\r\n                 //String fechaCreacionPerfil = ;\r\n\r\n                 final String uid = mAuth.getCurrentUser().getUid();\r\n                 final String urlFoto = \"\";\r\n                 String nombreCanguro = etNombre.getText().toString().trim();\r\n                 String apellidosCanguro = etApellidos.getText().toString().trim();\r\n                 String fechaNacimiento = etFechaNacimiento.getText().toString().trim();\r\n                 String direccion = etDireccion.getText().toString().trim();\r\n                 String descripcion = etDescripcion.getText().toString().trim();\r\n                 String sexo = obtenerSexo();\r\n                 String experiencia = obtenerExperiencia();\r\n                 double precio = precioHoraCanguro;\r\n\r\n\r\n                 // LOCALIZACION\r\n                 // Obtener coordenadas de direccion\r\n                 double longitudLoc = latLng.longitude;\r\n                 double latitudLoc = latLng.latitude;\r\n\r\n                 // Crear MAPA COORDENADAS para meterlo en la localizacion del Canguro\r\n                 Map<String, Double> mapLoc = new HashMap<>();\r\n                 mapLoc.put(\"Latitud\", latitudLoc);\r\n                 mapLoc.put(\"Longitud\", longitudLoc);\r\n\r\n\r\n                 // ListView CHECKBOX PREFERENCIAS\r\n                 Map<String, Boolean> mapPrefEdades = new HashMap<>();\r\n                 for (int cont = 0; cont < listViewPreferencias.getCount(); cont++) {\r\n                     if (listViewPreferencias.isItemChecked(cont)) {\r\n                         String textoItemSeleccionado = listViewPreferencias.getItemAtPosition(cont).toString();\r\n                         mapPrefEdades.put(textoItemSeleccionado, true);\r\n                     }\r\n                 }\r\n\r\n\r\n                 // ListView CHECKBOX PLUSES\r\n                 Map<String, Boolean> mapPluses = new HashMap<>();\r\n                 for (int cont = 0; cont < listViewPluses.getCount(); cont++) {\r\n                     if (listViewPluses.isItemChecked(cont)) {\r\n                         String textoItemSeleccionado = listViewPluses.getItemAtPosition(cont).toString();\r\n                         mapPluses.put(textoItemSeleccionado, true);\r\n                     }\r\n                 }\r\n\r\n                 // ListView CHECKBOX IDIOMAS\r\n                 Map<String, Boolean> mapIdiomas = new HashMap<>();\r\n                 for (int cont = 0; cont < listViewIdiomas.getCount(); cont++) {\r\n                     if (listViewIdiomas.isItemChecked(cont)) {\r\n                         String textoItemSeleccionado = listViewIdiomas.getItemAtPosition(cont).toString();\r\n                         mapIdiomas.put(textoItemSeleccionado, true);\r\n                     }\r\n                 }\r\n\r\n                 // Escribir datos en FIRESTORE\r\n                 /*Creamos un mapa para meter los datos de las familias*/\r\n                 Map<String, Object> mapCanguro = new HashMap<>();\r\n\r\n                 //mapCanguro.put(\"Id Canguro\", idCanguro);\r\n                 mapCanguro.put(\"uid\", uid);\r\n                 mapCanguro.put(\"nombre\", nombreCanguro);\r\n                 mapCanguro.put(\"apellidos\", apellidosCanguro);\r\n                 mapCanguro.put(\"fechaNacimiento\", fechaNacimiento);\r\n                 mapCanguro.put(\"edad\", edadCanguro);\r\n                 mapCanguro.put(\"sexo\", sexo);\r\n                 mapCanguro.put(\"direccion\", direccion);\r\n                 mapCanguro.put(\"localizacion\", mapLoc);  // Mapa localizacion Canguro\r\n                 mapCanguro.put(\"experiencia\", experiencia);\r\n                 mapCanguro.put(\"precioHora\", precio);\r\n                 mapCanguro.put(\"descripcion\", descripcion);\r\n                 mapCanguro.put(\"latitud\", latitudLoc);\r\n                 mapCanguro.put(\"longitud\", longitudLoc);\r\n                 mapCanguro.put(\"preferenciaEdades\", mapPrefEdades);  // Mapa Prefrencia Edades Canguro\r\n                 mapCanguro.put(\"pluses\", mapPluses);  // Mapa Pluses Canguro\r\n                 mapCanguro.put(\"idiomas\", mapIdiomas);  // Mapa Idiomas Canguro\r\n\r\n                 /*Introducimos el canguro nuevo dentro de la BBDD*/\r\n                 bbdd.collection(\"canguros\")\r\n                         .document(uid)\r\n                         .set(mapCanguro);\r\n\r\n                 /*Mapa para de datos para actualizar el usuario*/\r\n                 Map<String, Object> userUpdate = new HashMap<>();\r\n                 userUpdate.put(\"perfil\", true);\r\n                 userUpdate.put(\"tipo\", \"canguro\");\r\n\r\n\r\n\r\n                 // METER FOTO DEL PERFIL CANGURO\r\n\r\n                 final StorageReference rutaArchivo = storageReference.child(\"img_Canguros\").child(uid +\".jpg\");\r\n                 /*Metemos la foto en Storage*/\r\n                 rutaArchivo.putFile(uriFoto).addOnSuccessListener( new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                     @Override\r\n                     public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n\r\n                         rutaArchivo.getDownloadUrl().addOnSuccessListener( new OnSuccessListener<Uri>() {\r\n                             @Override\r\n                             public void onSuccess(Uri uri) {\r\n                                 final Uri downloadUrl = uri;\r\n                                 urlFotoPerfil = downloadUrl.toString();\r\n                                 //urlFoto = urlFotoPerfil.toString();\r\n\r\n                                 // Creamos un mapa para actualizar el perifl del usuario*/\r\n                                 Map<String, Object> userUpdateImg = new HashMap<>();\r\n                                 userUpdateImg.put(\"img\", urlFotoPerfil);\r\n\r\n                                 // Actualizamos el perfil del usuario para que no vuelva a la pantalla de creacion de perfil*/\r\n                                 bbdd.collection(\"canguros\").document(uid).set(userUpdateImg, SetOptions.merge());\r\n\r\n\r\n                             }\r\n                         } ).addOnFailureListener( new OnFailureListener() {\r\n                             @Override\r\n                             public void onFailure(@NonNull Exception exception) {\r\n\r\n                                 Toast.makeText(CrearPerfilCanguro.this, \"Ha fallado\", Toast.LENGTH_SHORT).show();\r\n                             }\r\n                         } );\r\n\r\n\r\n                     }\r\n                 } );\r\n\r\n\r\n                 /*Actualizamos el perfil del usuario para que no vuelva a la pantalla de creacion de perfil*/\r\n                 bbdd.collection(\"usuarios\")\r\n                         .document(uid)\r\n                         .set(userUpdate, SetOptions.merge());\r\n\r\n                 // Creamos PROGGRES BAR para que el usuario sepa que su perfil Canguro se está creando)\r\n                 progressBarCrearPerfil.StarProgressBar();\r\n                 Handler handler = new Handler();\r\n                 handler.postDelayed(new Runnable() {\r\n                     @Override\r\n                     public void run() {\r\n                         progressBarCrearPerfil.finishProgressBar();\r\n\r\n                         //Aqui abrimos la actividad main\r\n                         Intent main = new Intent(getApplicationContext(), MainActivityCanguro.class);\r\n                         startActivity(main);\r\n                         finish();\r\n                     }\r\n                 }, 2000);\r\n\r\n             }else{\r\n                 Toasty.error(CrearPerfilCanguro.this,\"Revisa los campos  rellenar\", Toast.LENGTH_LONG).show();\r\n             }\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private boolean validacionCampos() {\r\n\r\n        Boolean validar = true;\r\n\r\n        String urlFoto = urlFotoPerfil.toString();\r\n        String nombreCanguro = etNombre.getText().toString().trim();\r\n        String apellidosCanguro = etApellidos.getText().toString().trim();\r\n        String fechaNacimiento = etFechaNacimiento.getText().toString().trim();\r\n        String direccion = etDireccion.getText().toString().trim();\r\n        String descripcion = etDescripcion.getText().toString().trim();\r\n        String sexo = obtenerSexo();\r\n        String experiencia = obtenerExperiencia();\r\n        double precio = precioHoraCanguro;\r\n\r\n        if(nombreCanguro.isEmpty()){\r\n            nombre.setError(\"Debes de rellenar tu nombre\");\r\n            validar = false;\r\n        }\r\n        else if (fechaNacimiento.isEmpty()){\r\n            nombre.setError(\"Debes de rellenar tu fecha de nacimiento\");\r\n            validar = false;\r\n        }\r\n        else if (direccion.isEmpty()){\r\n            nombre.setError(\"Debes de rellenar con una direccion\");\r\n            validar = false;\r\n        }\r\n        else if (descripcion.isEmpty()){\r\n            nombre.setError(\"Debes de rellenar el campo\");\r\n            validar = false;\r\n        }\r\n        else if (apellidosCanguro.isEmpty()){\r\n            nombre.setError(\"Debes de rellenar el campo\");\r\n            validar = false;\r\n        }\r\n        else if (experiencia.isEmpty()){\r\n            nombre.setError(\"Debes de rellenar el campo\");\r\n            validar = false;\r\n        }\r\n\r\n\r\n        return validar;\r\n    }\r\n\r\n    private String obtenerExperiencia() {\r\n\r\n        String experiencia =\"\";    // EXPERIENCIA: Elección de experiencia\r\n\r\n        if(rbMenos6Meses.isChecked()){\r\n            experiencia = rbMenos6Meses.getText().toString();\r\n        } else if(rb6a12meses.isChecked()){\r\n            experiencia = rbMenos6Meses.getText().toString();\r\n        } else if(rb1a2años.isChecked()){\r\n            experiencia = rb1a2años.getText().toString();\r\n        } else if(rb2a6años.isChecked()){\r\n            experiencia = rb2a6años.getText().toString();\r\n        } else if(rbMas6años.isChecked()){\r\n            experiencia = rbMas6años.getText().toString();\r\n        }\r\n\r\n        return experiencia;\r\n\r\n    }\r\n\r\n    private String obtenerSexo() {\r\n\r\n        String sexo;    // SEXO: Elección de femenino o masculino\r\n        if(rbMasculino.isChecked()){\r\n            sexo = rbMasculino.getText().toString();\r\n        }\r\n        else{\r\n            sexo = rbFemenino.getText().toString();\r\n        }\r\n        return sexo;\r\n    }\r\n\r\n    // Cargar imagen de la memoria de movil\r\n    private void cargarImagen() {\r\n\r\n        Intent intentCargarFoto = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n\r\n        intentCargarFoto.setType(\"image/\");\r\n\r\n        startActivityForResult(intentCargarFoto.createChooser(intentCargarFoto, \"Seleccione una foto\"),200);\r\n\r\n    }\r\n\r\n    // Autocompletado de Google para el campo DIRECCION\r\n    private void establecerAutocompletadoDireccion() {\r\n\r\n        // Inicializamos Google.PLACES para autocomplete la direccion\r\n        if (!Places.isInitialized()) {\r\n            Places.initialize(getApplicationContext(), KEY_API_GOOGLE);\r\n        }\r\n\r\n        etDireccion.setFocusable(false);\r\n        etDireccion.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                //Inicializamos la lista de lugares\r\n                List<Place.Field> fieldList = Arrays.asList(Place.Field.ADDRESS, Place.Field.LAT_LNG, Place.Field.NAME);\r\n\r\n                // Creamos un intent que nos mostrará el autocompletado de direcciones\r\n                Intent intent = new Autocomplete.IntentBuilder(AutocompleteActivityMode.OVERLAY, fieldList).build(CrearPerfilCanguro.this);\r\n\r\n                // Start activity\r\n                startActivityForResult(intent, 100);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Resultado de:  Autocompletado Direccion o Cargar Foto. Depedniendo del resultado de la consulta\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        // Resultado de Activity para direccion\r\n        if (requestCode == 100) {\r\n            if (resultCode == RESULT_OK) {\r\n\r\n                // Instanciamos un PLACE, el cual lo obtendremos del autocomplete\r\n                Place place = Autocomplete.getPlaceFromIntent(data);\r\n                Toast.makeText(CrearPerfilCanguro.this,\"latlong: \" + place.getLatLng(), Toast.LENGTH_LONG).show();\r\n\r\n                String address = place.getAddress();\r\n                etDireccion. setText(address);\r\n                latLng = place.getLatLng();\r\n\r\n            } else if (resultCode == AutocompleteActivity.RESULT_ERROR) {\r\n\r\n                Status status = Autocomplete.getStatusFromIntent(data);\r\n                Toast.makeText(CrearPerfilCanguro.this, \"Error: \" + status.getStatusMessage(), Toast.LENGTH_LONG).show();\r\n\r\n            } else if (resultCode == RESULT_CANCELED) {\r\n\r\n            }\r\n        }\r\n\r\n        // Resultado de obtener foto del movil\r\n        else if (requestCode == 200){\r\n                if (resultCode == RESULT_OK) {\r\n\r\n                    String uid = mAuth.getCurrentUser().getUid();\r\n\r\n                    Uri pathFoto = data.getData();\r\n                    foto.setImageURI(pathFoto);\r\n                    uriFoto = pathFoto;\r\n\r\n                    //Toasty.info(CrearPerfilCanguro.this, \"Uri foto: \" + uriFoto, Toasty.LENGTH_LONG).show();\r\n\r\n                } else if(resultCode == RESULT_CANCELED){\r\n            }\r\n        }\r\n    }\r\n\r\n    // Fecha Nacimiento\r\n    private void establecerFechaNacimiento() {\r\n\r\n        /*\r\n        // Creamos un DatePicker para la fecha de Nacimiento\r\n        MaterialDatePicker.Builder builderDatePicker = MaterialDatePicker.Builder.datePicker();\r\n        builderDatePicker.setTitleText(\"Selecciona una fecha\");\r\n        final MaterialDatePicker materialDatePicker = builderDatePicker.build();\r\n*/\r\n        etFechaNacimiento.setFocusable(false);\r\n        etFechaNacimiento.setOnClickListener(new View.OnClickListener() {\r\n\r\n            @RequiresApi(api = Build.VERSION_CODES.N)\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                //materialDatePicker.show(getSupportFragmentManager(), \"DATE_PICKER\");\r\n\r\n                final Calendar calendar = Calendar.getInstance();\r\n\r\n                DatePickerDialog datePickerDialog = new DatePickerDialog(CrearPerfilCanguro.this, new DatePickerDialog.OnDateSetListener(){\r\n                    @Override\r\n                    public void onDateSet(DatePicker datePicker, int year, int month, int day) {\r\n\r\n                        Calendar calendarResultado = Calendar.getInstance();\r\n                        calendarResultado.set(Calendar.YEAR, year);\r\n                        calendarResultado.set(Calendar.MONTH, month);\r\n                        calendarResultado.set(Calendar.DAY_OF_MONTH, day);\r\n\r\n                        // OBTENEMOS EL AÑO DE NACIMIENTO (Recogido del metodo onDateSet) y el año Actual, obtenido de Calendar\r\n                        int añoNacimiento = year;\r\n                        int añoActual = calendar.get(Calendar.YEAR);\r\n\r\n                        // CALCULAMOS LA EDAD\r\n                        edadCanguro = añoActual - añoNacimiento;\r\n\r\n                        // FORMATEAMOS LA FECHA PARA COLOCAR EN EL EDIT TEXT\r\n                        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"dd/MM/yyyy\", Locale.getDefault());\r\n                        Date dateFechaNacimiento = calendarResultado.getTime();\r\n                        String fechaNacimiento = simpleDateFormat.format(dateFechaNacimiento);\r\n\r\n                        etFechaNacimiento.setText(fechaNacimiento);\r\n                    }\r\n                }, calendar.get(Calendar.YEAR) - 18, calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH));\r\n                datePickerDialog.show();\r\n            }\r\n        });\r\n\r\n        /*\r\n        // Cuando el usuario eliga la fecha y de al boton OK, hara lo siguiente\r\n        materialDatePicker.addOnPositiveButtonClickListener(new MaterialPickerOnPositiveButtonClickListener() {\r\n            @Override\r\n            public void onPositiveButtonClick(Object selection) {\r\n                etFechaNacimiento.setText(materialDatePicker.getHeaderText());\r\n            }\r\n        });\r\n         */\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bbsitter/bbsitter/Perfiles/CrearPerfilCanguro.java	(revision 28350bd8306d52387ecedf0bf25b70dc30374b64)
+++ app/src/main/java/com/bbsitter/bbsitter/Perfiles/CrearPerfilCanguro.java	(date 1606848496679)
@@ -53,6 +53,7 @@
 import java.util.List;
 import java.util.Locale;
 import java.util.Map;
+import java.util.Random;
 
 import de.hdodenhof.circleimageview.CircleImageView;
 import es.dmoral.toasty.Toasty;
@@ -194,6 +195,9 @@
              if(validacionCampos()) {
 
                  //String fechaCreacionPerfil = ;
+                 Random randomRating = new Random();
+                 int rating  = randomRating.nextInt(6)+1;
+
 
                  final String uid = mAuth.getCurrentUser().getUid();
                  final String urlFoto = "";
@@ -267,6 +271,7 @@
                  mapCanguro.put("preferenciaEdades", mapPrefEdades);  // Mapa Prefrencia Edades Canguro
                  mapCanguro.put("pluses", mapPluses);  // Mapa Pluses Canguro
                  mapCanguro.put("idiomas", mapIdiomas);  // Mapa Idiomas Canguro
+                 mapCanguro.put("rating", rating);
 
                  /*Introducimos el canguro nuevo dentro de la BBDD*/
                  bbdd.collection("canguros")
Index: app/src/main/java/com/bbsitter/bbsitter/Perfiles/CrearPerfilFamilia.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.bbsitter.bbsitter.Perfiles;\r\n\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.provider.MediaStore;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.bbsitter.bbsitter.Main.MainActivity;\r\nimport com.bbsitter.bbsitter.R;\r\nimport com.google.android.gms.common.api.Status;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.libraries.places.api.Places;\r\nimport com.google.android.libraries.places.api.model.Place;\r\nimport com.google.android.libraries.places.widget.Autocomplete;\r\nimport com.google.android.libraries.places.widget.AutocompleteActivity;\r\nimport com.google.android.libraries.places.widget.model.AutocompleteActivityMode;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.SetOptions;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\nimport es.dmoral.toasty.Toasty;\r\n\r\npublic class CrearPerfilFamilia extends AppCompatActivity {\r\n\r\n    private final String KEY_API_GOOGLE = \"AIzaSyCAq5pFIif49ezgqjq4x6ZEaFMyuGXnCH0\";\r\n\r\n    /*Movidas de Firebase*/\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseFirestore bbdd;\r\n    private StorageReference storageRef;\r\n\r\n    private CircleImageView foto;\r\n    private TextInputLayout nombre, descripcion, direccion;\r\n    private TextInputEditText etNombre, etDireccion, etDescripcion;\r\n    private Button btnCrearPerfilFamilia;\r\n\r\n    /*Para coger la foto de perfil*/\r\n    private Uri uri;\r\n    private String urlFoto = \"\";\r\n\r\n    private LatLng latLng;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_crear_perfil_familia);\r\n\r\n\r\n\r\n        /*Firebase Auth y BBDD*/\r\n        mAuth = FirebaseAuth.getInstance();\r\n        bbdd = FirebaseFirestore.getInstance();\r\n\r\n        /*Subir archivos a Storage*/\r\n        storageRef = FirebaseStorage.getInstance().getReference();\r\n\r\n\r\n        nombre = findViewById(R.id.nombreFamilia_edit_text);\r\n        descripcion = findViewById(R.id.descripcionFamilia_edit_text);\r\n        direccion = findViewById(R.id.direccion_edit_text);\r\n        foto = findViewById(R.id.imageFamilia);\r\n\r\n        etNombre = findViewById(R.id.etNombreFamilia);\r\n        etDireccion = findViewById(R.id.etDireccionFamilia);\r\n        etDescripcion = findViewById(R.id.etDescripcionFamilia);\r\n\r\n        btnCrearPerfilFamilia = (Button) findViewById(R.id.btnCrearPerfilFamilia);\r\n\r\n        establecerAutocompletadoDireccion();\r\n        final ProgressBarCrearPerfil progressBarCrearFamilia = new ProgressBarCrearPerfil(CrearPerfilFamilia.this);\r\n\r\n        foto.setOnClickListener(new View.OnClickListener() {\r\n\r\n            @Override\r\n            public void onClick(View v) {\r\n                cargarImagen();\r\n            }\r\n        });\r\n\r\n        btnCrearPerfilFamilia.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                try {\r\n                    /*Cargamos los datos*/\r\n                    String nombre = etNombre.getText().toString().trim();\r\n                    String descripcion = etDescripcion.getText().toString().trim();\r\n                    String direccion = etDireccion.getText().toString().trim();\r\n                    final String uid = mAuth.getCurrentUser().getUid();\r\n\r\n                    /*Creamos una carpeta con el nombre img_familias para poder meter las fotos*/\r\n                    storageRef = storageRef.child(\"img_familias\").child(uid);\r\n\r\n\r\n                    /*Creamos un mapa para meter los datos de las familias*/\r\n                    Map<String, Object> mapUser = new HashMap<>();\r\n                    mapUser.put(\"nombre\", nombre);\r\n                    mapUser.put(\"descripcion\", descripcion);\r\n                    mapUser.put(\"direccion\", direccion);\r\n                    mapUser.put(\"uid\", uid);\r\n\r\n\r\n                    /* LOCALIZACION*/\r\n                    // Obtener coordenadas de direccion\r\n                    double longitudLoc = latLng.longitude;\r\n                    double latitudLoc = latLng.latitude;\r\n\r\n                    // Crear MAPA COORDENADAS para meterlo en la localizacion\r\n                    Map<String, Double> mapLoc = new HashMap<>();\r\n                    mapLoc.put(\"Latitud\", latitudLoc);\r\n                    mapLoc.put(\"Longitud\", longitudLoc);\r\n\r\n                    /*metemos el mapa de la latitud y longitud en el mapa de usuario*/\r\n                    mapUser.put(\"localizacion\", mapLoc);\r\n\r\n                    /*Creamos la coleccion Familias en la bbdd*/\r\n                    bbdd.collection(\"familias\")\r\n                            .document(uid)\r\n                            .set(mapUser);\r\n\r\n                    /*Creamos un mapa para actualizar el perifl del usuario*/\r\n                    Map<String, Object> userUpdate = new HashMap<>();\r\n                    userUpdate.put(\"perfil\", true);\r\n                    userUpdate.put(\"tipo\", \"familia\");\r\n\r\n                    /*Actualizamos el perfil del usuario para que no vuelva a la pantalla de creacion de perfil*/\r\n                    bbdd.collection(\"usuarios\").document(uid)\r\n                            .set(userUpdate, SetOptions.merge());\r\n\r\n\r\n                    /*Metemos la foto en Storage*/\r\n                    storageRef.putFile(uri).addOnSuccessListener( new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                        @Override\r\n                        public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                            storageRef.getDownloadUrl().addOnSuccessListener( new OnSuccessListener<Uri>() {\r\n                                @Override\r\n                                public void onSuccess(Uri uri) {\r\n                                    final Uri downloadUrl = uri;\r\n                                    urlFoto = downloadUrl.toString();\r\n\r\n                                    /*Creamos un mapa para actualizar la imagen del perfil*/\r\n                                    Map<String, Object> userUpdateImg = new HashMap<>();\r\n                                    userUpdateImg.put(\"img\", urlFoto);\r\n\r\n                                    bbdd.collection(\"familias\").document(uid)\r\n                                            .set(userUpdateImg, SetOptions.merge());\r\n\r\n                                }\r\n                            } ).addOnFailureListener( new OnFailureListener() {\r\n                                @Override\r\n                                public void onFailure(@NonNull Exception exception) {\r\n\r\n                                }\r\n                            } );\r\n\r\n                        }\r\n                    } );\r\n\r\n\r\n\r\n                    // Creamos PROGRESS BAR para que el usuario sepa que su perfil se está creando)\r\n                    progressBarCrearFamilia.StarProgressBar();\r\n                    Handler handler = new Handler();\r\n                    handler.postDelayed(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            progressBarCrearFamilia.finishProgressBar();\r\n\r\n                            //Aqui abrimos la actividad main\r\n                            Intent main = new Intent(getApplicationContext(), MainActivity.class);\r\n                            startActivity(main);\r\n                            finish();\r\n                        }\r\n                    }, 2000);\r\n\r\n\r\n\r\n\r\n                }\r\n                catch(Exception e)\r\n                {\r\n                    Toast.makeText(CrearPerfilFamilia.this, e.toString(), Toast.LENGTH_SHORT).show();\r\n                    comprobarDatos();\r\n                }\r\n\r\n\r\n\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private boolean comprobarDatos()\r\n    {\r\n        Boolean validar = true;\r\n\r\n        //String fotoFamilia = urlFotoPerfil.toString();\r\n        String nombreFamilia = etNombre.getText().toString().trim();\r\n        String direccionFamilia = etDireccion.getText().toString().trim();\r\n        String descripcionFamilia = etDescripcion.getText().toString().trim();\r\n\r\n\r\n        if(nombreFamilia.isEmpty()  ){\r\n            nombre.setError(\"Debes rellenar el campo\");\r\n\r\n            validar = false;\r\n        }\r\n        if(direccionFamilia.isEmpty())\r\n        {\r\n            direccion.setError(\"Debes rellenar el campo\");\r\n            validar = false;\r\n        }\r\n        if(descripcionFamilia.isEmpty())\r\n        {\r\n            descripcion.setError(\"Debes rellenar el campo\");\r\n            validar = false;\r\n        }\r\n\r\n        if(!nombreFamilia.isEmpty())\r\n        {\r\n            nombre.setError(null);\r\n        }\r\n        if(!direccionFamilia.isEmpty())\r\n        {\r\n            direccion.setError(null);\r\n        }\r\n        if(!descripcionFamilia.isEmpty())\r\n        {\r\n            descripcion.setError(null);\r\n        }\r\n\r\n        return validar;\r\n    }\r\n\r\n    private void cargarImagen() {\r\n\r\n        Intent intentCargarFoto = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n\r\n        intentCargarFoto.setType(\"image/\");\r\n\r\n        startActivityForResult(intentCargarFoto.createChooser(intentCargarFoto, \"Seleccione una foto\"),200);\r\n\r\n\r\n\r\n    }\r\n\r\n    /*Buscamos la dirrecion con la API de Google*/\r\n    private void establecerAutocompletadoDireccion() {\r\n\r\n        // Inicializamos Google.PLACES para autocomplete la direccion\r\n        if (!Places.isInitialized()) {\r\n            Places.initialize(getApplicationContext(), KEY_API_GOOGLE);\r\n        }\r\n\r\n        etDireccion.setFocusable(false);\r\n        etDireccion.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                //Inicializamos la lista de lugares\r\n                List<Place.Field> fieldList = Arrays.asList(Place.Field.ADDRESS, Place.Field.LAT_LNG, Place.Field.NAME);\r\n\r\n                // Creamos un intent que nos mostrará el autocompletado de direcciones\r\n                Intent intent = new Autocomplete.IntentBuilder(AutocompleteActivityMode.OVERLAY, fieldList).build(CrearPerfilFamilia.this);\r\n\r\n                // Start activity\r\n                startActivityForResult(intent, 100);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /* Resultado de autocompletado Direccion*/\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        // Resultado de Activity para direccion\r\n        if (requestCode == 100) {\r\n            if (resultCode == RESULT_OK) {\r\n\r\n                // Instanciamos un PLACE, el cual lo obtendremos del autocomplete\r\n                Place place = Autocomplete.getPlaceFromIntent(data);\r\n\r\n                String address = place.getAddress();\r\n\r\n                try {\r\n\r\n                    etDireccion. setText(address);\r\n                    latLng = place.getLatLng();\r\n                }\r\n                catch(Exception e)\r\n                {\r\n                    Toasty.error(getApplicationContext(), \"Debes rellenar la dirección\", Toasty.LENGTH_LONG).show();\r\n                }\r\n\r\n\r\n            } else if (resultCode == AutocompleteActivity.RESULT_ERROR) {\r\n\r\n                Status status = Autocomplete.getStatusFromIntent(data);\r\n                Toast.makeText(CrearPerfilFamilia.this, \"Error: \" + status.getStatusMessage(), Toast.LENGTH_LONG).show();\r\n\r\n            } else if (resultCode == RESULT_CANCELED) {\r\n\r\n            }\r\n        }\r\n\r\n        // Resultado de obtener foto del movil\r\n        else if (requestCode == 200){\r\n            if (resultCode == RESULT_OK) {\r\n\r\n                uri = data.getData();\r\n\r\n                foto.setImageURI(uri);\r\n\r\n\r\n            } else if(resultCode == RESULT_CANCELED){\r\n            }\r\n        }\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bbsitter/bbsitter/Perfiles/CrearPerfilFamilia.java	(revision 28350bd8306d52387ecedf0bf25b70dc30374b64)
+++ app/src/main/java/com/bbsitter/bbsitter/Perfiles/CrearPerfilFamilia.java	(date 1606906135313)
@@ -5,6 +5,7 @@
 import android.os.Bundle;
 import android.os.Handler;
 import android.provider.MediaStore;
+import android.util.Log;
 import android.view.View;
 import android.widget.Button;
 import android.widget.Toast;
@@ -19,6 +20,7 @@
 import com.google.android.gms.maps.model.LatLng;
 import com.google.android.gms.tasks.OnFailureListener;
 import com.google.android.gms.tasks.OnSuccessListener;
+import com.google.android.gms.tasks.Task;
 import com.google.android.libraries.places.api.Places;
 import com.google.android.libraries.places.api.model.Place;
 import com.google.android.libraries.places.widget.Autocomplete;
@@ -30,8 +32,10 @@
 import com.google.firebase.firestore.FirebaseFirestore;
 import com.google.firebase.firestore.SetOptions;
 import com.google.firebase.storage.FirebaseStorage;
+import com.google.firebase.storage.OnProgressListener;
 import com.google.firebase.storage.StorageReference;
 import com.google.firebase.storage.UploadTask;
+import com.squareup.picasso.Picasso;
 
 import java.util.Arrays;
 import java.util.HashMap;
@@ -50,6 +54,8 @@
     private FirebaseFirestore bbdd;
     private StorageReference storageRef;
 
+    private String uid;
+
     private CircleImageView foto;
     private TextInputLayout nombre, descripcion, direccion;
     private TextInputEditText etNombre, etDireccion, etDescripcion;
@@ -57,7 +63,7 @@
 
     /*Para coger la foto de perfil*/
     private Uri uri;
-    private String urlFoto = "";
+    private String urlFoto;
 
     private LatLng latLng;
 
@@ -106,15 +112,19 @@
             public void onClick(View v) {
 
                 try {
+                   // final String[] urlFoto = {""};
                     /*Cargamos los datos*/
                     String nombre = etNombre.getText().toString().trim();
                     String descripcion = etDescripcion.getText().toString().trim();
                     String direccion = etDireccion.getText().toString().trim();
-                    final String uid = mAuth.getCurrentUser().getUid();
+                    uid = mAuth.getCurrentUser().getUid();
 
-                    /*Creamos una carpeta con el nombre img_familias para poder meter las fotos*/
-                    storageRef = storageRef.child("img_familias").child(uid);
+                    /*
+                    final Uri downloadUrl = uri;
+                    urlFoto[0] = downloadUrl.toString();
 
+
+                     */
 
                     /*Creamos un mapa para meter los datos de las familias*/
                     Map<String, Object> mapUser = new HashMap<>();
@@ -122,6 +132,7 @@
                     mapUser.put("descripcion", descripcion);
                     mapUser.put("direccion", direccion);
                     mapUser.put("uid", uid);
+                    mapUser.put("img", urlFoto);
 
 
                     /* LOCALIZACION*/
@@ -152,64 +163,33 @@
                             .set(userUpdate, SetOptions.merge());
 
 
-                    /*Metemos la foto en Storage*/
-                    storageRef.putFile(uri).addOnSuccessListener( new OnSuccessListener<UploadTask.TaskSnapshot>() {
-                        @Override
-                        public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {
-                            storageRef.getDownloadUrl().addOnSuccessListener( new OnSuccessListener<Uri>() {
-                                @Override
-                                public void onSuccess(Uri uri) {
-                                    final Uri downloadUrl = uri;
-                                    urlFoto = downloadUrl.toString();
-
-                                    /*Creamos un mapa para actualizar la imagen del perfil*/
-                                    Map<String, Object> userUpdateImg = new HashMap<>();
-                                    userUpdateImg.put("img", urlFoto);
 
-                                    bbdd.collection("familias").document(uid)
-                                            .set(userUpdateImg, SetOptions.merge());
-
-                                }
-                            } ).addOnFailureListener( new OnFailureListener() {
-                                @Override
-                                public void onFailure(@NonNull Exception exception) {
 
-                                }
-                            } );
-
-                        }
-                    } );
-
-
+                }
+                catch(Exception e)
+                {
+                    Toast.makeText(CrearPerfilFamilia.this, e.toString(), Toast.LENGTH_SHORT).show();
+                    comprobarDatos();
+                }
 
-                    // Creamos PROGRESS BAR para que el usuario sepa que su perfil se está creando)
-                    progressBarCrearFamilia.StarProgressBar();
-                    Handler handler = new Handler();
-                    handler.postDelayed(new Runnable() {
-                        @Override
-                        public void run() {
-                            progressBarCrearFamilia.finishProgressBar();
+                // Creamos PROGRESS BAR para que el usuario sepa que su perfil se está creando)
+                progressBarCrearFamilia.StarProgressBar();
+                Handler handler = new Handler();
+                handler.postDelayed(new Runnable() {
+                    @Override
+                    public void run() {
+                        progressBarCrearFamilia.finishProgressBar();
 
-                            //Aqui abrimos la actividad main
-                            Intent main = new Intent(getApplicationContext(), MainActivity.class);
-                            startActivity(main);
-                            finish();
-                        }
-                    }, 2000);
+                        //Aqui abrimos la actividad mainç
+
+                                    Intent main = new Intent(getApplicationContext(), MainActivity.class);
+                                    startActivity(main);
+                                    finish();
+
+                    }
+                }, 2000);
 
 
-
-
-                }
-                catch(Exception e)
-                {
-                    Toast.makeText(CrearPerfilFamilia.this, e.toString(), Toast.LENGTH_SHORT).show();
-                    comprobarDatos();
-                }
-
-
-
-
             }
         });
     }
@@ -263,9 +243,6 @@
         intentCargarFoto.setType("image/");
 
         startActivityForResult(intentCargarFoto.createChooser(intentCargarFoto, "Seleccione una foto"),200);
-
-
-
     }
 
     /*Buscamos la dirrecion con la API de Google*/
@@ -335,10 +312,42 @@
 
                 uri = data.getData();
 
-                foto.setImageURI(uri);
+                /*Creamos una carpeta con el nombre img_familias para poder meter las fotos*/
+                storageRef = storageRef.child("img_familias").child(uid);
+
+                //final StorageReference rutaArchivo = storageRef.child("img_Familias").child(uid);
+
+                /*Metemos la foto en Storage*/
+                storageRef.putFile(uri)
+                        .addOnSuccessListener( new OnSuccessListener<UploadTask.TaskSnapshot>() {
+                            @Override
+                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {
+
+                                Task<Uri> downUrl=taskSnapshot.getMetadata().getReference().getDownloadUrl();
+                                urlFoto = downUrl.getResult().toString();
+
+                                Log.i("url:",downUrl.getResult().toString());
+                            }
+                        })
+                        .addOnFailureListener(new OnFailureListener() {
+                            @Override
+                            public void onFailure(@NonNull Exception e) {
+
+                            }
+                        }).addOnProgressListener(new OnProgressListener<UploadTask.TaskSnapshot>() {
+                            @Override
+                            public void onProgress(@NonNull UploadTask.TaskSnapshot snapshot) {
+
+                            }
+                });
+
+
+                //Agrega una nueva imagen desde una url usando Picasso.
+                Picasso.get().load(uri).into(foto);
 
 
             } else if(resultCode == RESULT_CANCELED){
+                Log.i("url:","fallo al cargar la imagen");
             }
         }
     }
Index: app/src/main/java/com/bbsitter/bbsitter/Adaptadores/CanguroAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.bbsitter.bbsitter.Adaptadores;\r\n\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.RatingBar;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.cardview.widget.CardView;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bbsitter.bbsitter.Clases.Canguro;\r\nimport com.bbsitter.bbsitter.OpcionesMenuCanguro.PerfilCanguroFragment;\r\nimport com.bbsitter.bbsitter.R;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.Random;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\npublic class CanguroAdapter extends FirestoreRecyclerAdapter<Canguro, CanguroAdapter.ViewHolder> {\r\n\r\n    String dist = \"0\";\r\n    Random randomStars = new Random();\r\n\r\n    /**\r\n     * Create a new RecyclerView adapter that listens to a Firestore Query.  See {@link\r\n     * FirestoreRecyclerOptions} for configuration options.\r\n     *\r\n     * @param options\r\n     */\r\n    public CanguroAdapter(@NonNull FirestoreRecyclerOptions<Canguro> options) {\r\n        super(options);\r\n    }\r\n\r\n    @Override\r\n    protected void onBindViewHolder(@NonNull ViewHolder holder, int position, @NonNull Canguro canguro) {\r\n\r\n        // Poner FOTO\r\n        String img = canguro.getImg();\r\n        Picasso.get().load(img).into(holder.img);\r\n\r\n        holder.nombre.setText(canguro.getNombre());\r\n        holder.edad.setText(String.valueOf(canguro.getEdad()) + \" años\" );\r\n        holder.precioHora.setText(canguro.getPrecioHora() + \" €\");\r\n\r\n        holder.ratingBar.setRating(randomStars.nextInt(6)+1);\r\n        // Calcular la distancia\r\n        holder.distancia.setText(dist + \" kms\");\r\n\r\n\r\n\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int i) {\r\n\r\n        View view = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.item_canguro, viewGroup, false);\r\n        return new ViewHolder(view);\r\n\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        // Card View para poder pinchar sobre el item del Recycler\r\n        CardView cardViewCanguro;\r\n\r\n        CircleImageView img;\r\n        TextView nombre, edad, distancia, precioHora;\r\n        RatingBar ratingBar;\r\n\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            img = itemView.findViewById(R.id.itemImagenCanguro);\r\n            nombre = itemView.findViewById(R.id.itemNombreCanguro);\r\n            edad = itemView.findViewById(R.id.itemEdadCanguro);\r\n            distancia = itemView.findViewById(R.id.itemDistanciaCanguro);\r\n            precioHora = itemView.findViewById(R.id.itemPrecioHoraCanguro);\r\n            ratingBar = itemView.findViewById(R.id.itemRatingBarCanguro);\r\n\r\n            cardViewCanguro = itemView.findViewById(R.id.cardViewCanguro);\r\n        }\r\n\r\n        public CircleImageView getImg() {\r\n            return img;\r\n        }\r\n\r\n        public void setImg(CircleImageView img) {\r\n            this.img = img;\r\n        }\r\n\r\n        public TextView getNombre() {\r\n            return nombre;\r\n        }\r\n\r\n        public void setNombre(TextView nombre) {\r\n            this.nombre = nombre;\r\n        }\r\n\r\n        public TextView getEdad() {\r\n            return edad;\r\n        }\r\n\r\n        public void setEdad(TextView edad) {\r\n            this.edad = edad;\r\n        }\r\n\r\n        public TextView getDistancia() {\r\n            return distancia;\r\n        }\r\n\r\n        public void setDistancia(TextView distancia) {\r\n            this.distancia = distancia;\r\n        }\r\n\r\n        public TextView getPrecioHora() {\r\n            return precioHora;\r\n        }\r\n\r\n        public void setPrecioHora(TextView precioHora) {\r\n            this.precioHora = precioHora;\r\n        }\r\n\r\n        public RatingBar getRatingBar() {\r\n            return ratingBar;\r\n        }\r\n\r\n        public void setRatingBar(RatingBar ratingBar) {\r\n            this.ratingBar = ratingBar;\r\n        }\r\n\r\n        public CardView getCardViewCanguro() {\r\n            return cardViewCanguro;\r\n        }\r\n\r\n        public void setCardViewCanguro(CardView cardViewCanguro) {\r\n            this.cardViewCanguro = cardViewCanguro;\r\n        }\r\n\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bbsitter/bbsitter/Adaptadores/CanguroAdapter.java	(revision 28350bd8306d52387ecedf0bf25b70dc30374b64)
+++ app/src/main/java/com/bbsitter/bbsitter/Adaptadores/CanguroAdapter.java	(date 1606848496723)
@@ -47,8 +47,8 @@
         holder.nombre.setText(canguro.getNombre());
         holder.edad.setText(String.valueOf(canguro.getEdad()) + " años" );
         holder.precioHora.setText(canguro.getPrecioHora() + " €");
-
-        holder.ratingBar.setRating(randomStars.nextInt(6)+1);
+        holder.ratingBar.setRating(canguro.getRating());
+        
         // Calcular la distancia
         holder.distancia.setText(dist + " kms");
 
Index: app/src/main/java/com/bbsitter/bbsitter/Clases/Canguro.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.bbsitter.bbsitter.Clases;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.Map;\r\n\r\npublic class Canguro implements Serializable {\r\n\r\n    //Atributos\r\n    private String img;\r\n\r\n    // Datos personales\r\n    private String nombre;\r\n    private String apellidos;\r\n    private String fechaNacimiento;\r\n    private int edad;\r\n    private String sexo;\r\n\r\n    // Direccion y fecha nacimiento\r\n    private String direccion; // Obtenidad de autocompletar Direccion\r\n    private double longitudLoc;\r\n    private double latitudLoc;\r\n\r\n    // Demás atributos\r\n    private double precioHora;    //Obtenida de slider precio/Hora\r\n    private String experiencia;\r\n    private String descripcion;\r\n    Map<String, Boolean> mapPluses;     // Pluses\r\n    Map<String, Boolean> mapPrefenciaEdades;    // PreferenciaEdades\r\n    Map<String, Boolean> mapIdiomas;    // PreferenciaEdades\r\n\r\n    private String uid;\r\n    // Fecha creacion\r\n    String fechaCreacionPerfil;\r\n\r\n\r\n    // Constructores\r\n\r\n    public Canguro(){}\r\n\r\n    public Canguro(String img, String nombre, String apellidos, String fechaNacimiento, int edad, String sexo, String direccion, double longitudLoc, double latitudLoc, double precioHora, String experiencia, String descripcion, Map<String, Boolean> mapPluses, Map<String, Boolean> mapPrefenciaEdades, Map<String, Boolean> mapIdiomas, String fechaCreacionPerfil, String uid) {\r\n        this.img = img;\r\n        this.nombre = nombre;\r\n        this.apellidos = apellidos;\r\n        this.fechaNacimiento = fechaNacimiento;\r\n        this.edad = edad;\r\n        this.sexo = sexo;\r\n        this.direccion = direccion;\r\n        this.longitudLoc = longitudLoc;\r\n        this.latitudLoc = latitudLoc;\r\n        this.precioHora = precioHora;\r\n        this.experiencia = experiencia;\r\n        this.descripcion = descripcion;\r\n        this.mapPluses = mapPluses;\r\n        this.mapPrefenciaEdades = mapPrefenciaEdades;\r\n        this.mapIdiomas = mapIdiomas;\r\n        this.fechaCreacionPerfil = fechaCreacionPerfil;\r\n        this.uid = uid;\r\n    }\r\n\r\n\r\n\r\n    // Getters and setters\r\n\r\n    public String getImg() {\r\n        return img;\r\n    }\r\n\r\n    public void setImg(String img) {\r\n        this.img = img;\r\n    }\r\n\r\n    public String getNombre() {\r\n        return nombre;\r\n    }\r\n\r\n    public void setNombre(String nombre) {\r\n        this.nombre = nombre;\r\n    }\r\n\r\n    public String getApellidos() {\r\n        return apellidos;\r\n    }\r\n\r\n    public void setApellidos(String apellidos) {\r\n        this.apellidos = apellidos;\r\n    }\r\n\r\n    public String getFechaNacimiento() {\r\n        return fechaNacimiento;\r\n    }\r\n\r\n    public void setFechaNacimiento(String fechaNacimiento) {\r\n        this.fechaNacimiento = fechaNacimiento;\r\n    }\r\n\r\n    public int getEdad() {\r\n        return edad;\r\n    }\r\n\r\n    public void setEdad(int edad) {\r\n        this.edad = edad;\r\n    }\r\n\r\n    public String getSexo() {\r\n        return sexo;\r\n    }\r\n\r\n    public void setSexo(String sexo) {\r\n        this.sexo = sexo;\r\n    }\r\n\r\n    public String getDireccion() {\r\n        return direccion;\r\n    }\r\n\r\n    public void setDireccion(String direccion) {\r\n        this.direccion = direccion;\r\n    }\r\n\r\n    public double getLongitudLoc() {\r\n        return longitudLoc;\r\n    }\r\n\r\n    public void setLongitudLoc(double longitudLoc) {\r\n        this.longitudLoc = longitudLoc;\r\n    }\r\n\r\n    public double getLatitudLoc() {\r\n        return latitudLoc;\r\n    }\r\n\r\n    public void setLatitudLoc(double latitudLoc) {\r\n        this.latitudLoc = latitudLoc;\r\n    }\r\n\r\n    public double getPrecioHora() {\r\n        return precioHora;\r\n    }\r\n\r\n    public void setPrecioHora(double precioHora) {\r\n        this.precioHora = precioHora;\r\n    }\r\n\r\n    public String getExperiencia() {\r\n        return experiencia;\r\n    }\r\n\r\n    public void setExperiencia(String experiencia) {\r\n        this.experiencia = experiencia;\r\n    }\r\n\r\n    public String getDescripcion() {\r\n        return descripcion;\r\n    }\r\n\r\n    public void setDescripcion(String descripcion) {\r\n        this.descripcion = descripcion;\r\n    }\r\n\r\n    public Map<String, Boolean> getMapPluses() {\r\n        return mapPluses;\r\n    }\r\n\r\n    public void setMapPluses(Map<String, Boolean> mapPluses) {\r\n        this.mapPluses = mapPluses;\r\n    }\r\n\r\n    public Map<String, Boolean> getMapPrefenciaEdades() {\r\n        return mapPrefenciaEdades;\r\n    }\r\n\r\n    public void setMapPrefenciaEdades(Map<String, Boolean> mapPrefenciaEdades) {\r\n        this.mapPrefenciaEdades = mapPrefenciaEdades;\r\n    }\r\n\r\n    public Map<String, Boolean> getMapIdiomas() {\r\n        return mapIdiomas;\r\n    }\r\n\r\n    public void setMapIdiomas(Map<String, Boolean> mapIdiomas) {\r\n        this.mapIdiomas = mapIdiomas;\r\n    }\r\n\r\n    public String getFechaCreacionPerfil() {\r\n        return fechaCreacionPerfil;\r\n    }\r\n\r\n    public void setFechaCreacionPerfil(String fechaCreacionPerfil) {\r\n        this.fechaCreacionPerfil = fechaCreacionPerfil;\r\n    }\r\n\r\n    public String getUid() {\r\n        return uid;\r\n    }\r\n\r\n    public void setUid(String uid) {\r\n        this.uid = uid;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bbsitter/bbsitter/Clases/Canguro.java	(revision 28350bd8306d52387ecedf0bf25b70dc30374b64)
+++ app/src/main/java/com/bbsitter/bbsitter/Clases/Canguro.java	(date 1606848242009)
@@ -24,6 +24,9 @@
     private double precioHora;    //Obtenida de slider precio/Hora
     private String experiencia;
     private String descripcion;
+
+    private int rating;
+
     Map<String, Boolean> mapPluses;     // Pluses
     Map<String, Boolean> mapPrefenciaEdades;    // PreferenciaEdades
     Map<String, Boolean> mapIdiomas;    // PreferenciaEdades
@@ -37,7 +40,7 @@
 
     public Canguro(){}
 
-    public Canguro(String img, String nombre, String apellidos, String fechaNacimiento, int edad, String sexo, String direccion, double longitudLoc, double latitudLoc, double precioHora, String experiencia, String descripcion, Map<String, Boolean> mapPluses, Map<String, Boolean> mapPrefenciaEdades, Map<String, Boolean> mapIdiomas, String fechaCreacionPerfil, String uid) {
+    public Canguro(String img, String nombre, String apellidos, String fechaNacimiento, int edad, String sexo, String direccion, double longitudLoc, double latitudLoc, double precioHora, String experiencia, String descripcion, int rating, Map<String, Boolean> mapPluses, Map<String, Boolean> mapPrefenciaEdades, Map<String, Boolean> mapIdiomas, String fechaCreacionPerfil, String uid) {
         this.img = img;
         this.nombre = nombre;
         this.apellidos = apellidos;
@@ -50,6 +53,7 @@
         this.precioHora = precioHora;
         this.experiencia = experiencia;
         this.descripcion = descripcion;
+        this.rating = rating;
         this.mapPluses = mapPluses;
         this.mapPrefenciaEdades = mapPrefenciaEdades;
         this.mapIdiomas = mapIdiomas;
@@ -196,4 +200,12 @@
     public void setUid(String uid) {
         this.uid = uid;
     }
+
+    public int getRating() {
+        return rating;
+    }
+
+    public void setRating(int rating) {
+        this.rating = rating;
+    }
 }
Index: app/src/main/res/layout/fragment_lista_valoracion_canguros.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_lista_valoracion_canguros.xml	(date 1606849128279)
+++ app/src/main/res/layout/fragment_lista_valoracion_canguros.xml	(date 1606849128279)
@@ -0,0 +1,15 @@
+<?xml version="1.0" encoding="utf-8"?>
+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    tools:context=".OpcionesMenu.Inicio.ListaValoracionCangurosFragment">
+
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/recycler_ListaValoracionCanguros"
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:paddingTop="10dp"
+        android:background="@color/moradooscuro"/>
+
+</FrameLayout>
\ No newline at end of file
Index: app/src/main/java/com/bbsitter/bbsitter/PagerAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.bbsitter.bbsitter;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.viewpager2.adapter.FragmentStateAdapter;\r\n\r\nimport com.bbsitter.bbsitter.OpcionesMenu.Inicio.ListaCangurosFragment;\r\nimport com.bbsitter.bbsitter.OpcionesMenuCanguro.Inicio.MapsFragmentCanguros;\r\n\r\npublic class PagerAdapter  extends FragmentStateAdapter {\r\n\r\n    public PagerAdapter(@NonNull Fragment fragment) {\r\n        super(fragment);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Fragment createFragment(int position) {\r\n        switch(position){\r\n            case 0:\r\n                return new ListaCangurosFragment();\r\n            case 1:\r\n                return new ListaCangurosFragment();\r\n            case 2:\r\n                return new ListaCangurosFragment();\r\n            default:\r\n                return new ListaCangurosFragment();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return 3;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bbsitter/bbsitter/PagerAdapter.java	(revision 28350bd8306d52387ecedf0bf25b70dc30374b64)
+++ app/src/main/java/com/bbsitter/bbsitter/PagerAdapter.java	(date 1606849205329)
@@ -5,6 +5,7 @@
 import androidx.viewpager2.adapter.FragmentStateAdapter;
 
 import com.bbsitter.bbsitter.OpcionesMenu.Inicio.ListaCangurosFragment;
+import com.bbsitter.bbsitter.OpcionesMenu.Inicio.ListaValoracionCangurosFragment;
 import com.bbsitter.bbsitter.OpcionesMenuCanguro.Inicio.MapsFragmentCanguros;
 
 public class PagerAdapter  extends FragmentStateAdapter {
@@ -20,7 +21,7 @@
             case 0:
                 return new ListaCangurosFragment();
             case 1:
-                return new ListaCangurosFragment();
+                return new ListaValoracionCangurosFragment();
             case 2:
                 return new ListaCangurosFragment();
             default:
Index: app/src/main/java/com/bbsitter/bbsitter/OpcionesMenu/Inicio/ListaCangurosFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.bbsitter.bbsitter.OpcionesMenu.Inicio;\r\n\r\nimport android.Manifest;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Location;\r\nimport android.location.LocationManager;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bbsitter.bbsitter.Adaptadores.CanguroAdapter;\r\nimport com.bbsitter.bbsitter.Clases.Canguro;\r\nimport com.bbsitter.bbsitter.OpcionesMenuCanguro.PerfilCanguroFragment;\r\nimport com.bbsitter.bbsitter.R;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.Random;\r\n\r\nimport static android.content.Context.LOCATION_SERVICE;\r\n\r\n/**\r\n * A simple {@link Fragment} subclass.\r\n * Use the {@link ListaCangurosFragment#newInstance} factory method to\r\n * create an instance of this fragment.\r\n */\r\npublic class ListaCangurosFragment extends Fragment {\r\n\r\n    // TODO: Rename parameter arguments, choose names that match\r\n    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER\r\n    private static final String ARG_PARAM1 = \"param1\";\r\n    private static final String ARG_PARAM2 = \"param2\";\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n\r\n    LatLng MIUBICACION;\r\n\r\n\r\n    private FirebaseFirestore bbdd;\r\n    private RecyclerView recyclerViewListaCanguros;\r\n    private CanguroAdapter mAdapter;\r\n\r\n    String dist = \"0\";\r\n\r\n    Random randomStars = new Random();\r\n\r\n\r\n    public ListaCangurosFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    /**\r\n     * Use this factory method to create a new instance of\r\n     * this fragment using the provided parameters.\r\n     *\r\n     * @param param1 Parameter 1.\r\n     * @param param2 Parameter 2.\r\n     * @return A new instance of fragment ListaCangurosFragment.\r\n     */\r\n    // TODO: Rename and change types and number of parameters\r\n    public static ListaCangurosFragment newInstance(String param1, String param2) {\r\n        ListaCangurosFragment fragment = new ListaCangurosFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View view = inflater.inflate(R.layout.fragment_lista_canguros, container, false);\r\n\r\n        // OBETENMOS LA UBICACION PARA CALCULAR LA DISTANCIA DE LOS CANGUROS *************\r\n/*\r\n        LocationManager locationManager;\r\n        locationManager = (LocationManager) getActivity().getSystemService(LOCATION_SERVICE);\r\n\r\n        if (ActivityCompat.checkSelfPermission(getContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(getContext(), Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(getActivity(), new String[]{\r\n\r\n                    Manifest.permission.ACCESS_FINE_LOCATION,\r\n                    Manifest.permission.ACCESS_COARSE_LOCATION\r\n\r\n            },1000);\r\n        }\r\n\r\n        Location loc = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);\r\n        MIUBICACION = new LatLng(loc.getLatitude(), loc.getLongitude());\r\n*/\r\n\r\n        // RECYCLER VIEW ****************\r\n\r\n        recyclerViewListaCanguros = view.findViewById(R.id.recycler_ListaCanguros);\r\n        recyclerViewListaCanguros.setLayoutManager(new LinearLayoutManager(getContext()));\r\n        bbdd = FirebaseFirestore.getInstance();\r\n\r\n\r\n        Query query = bbdd.collection(\"canguros\");\r\n\r\n        FirestoreRecyclerOptions<Canguro> firestoreRecyclerOptions = new FirestoreRecyclerOptions.Builder<Canguro>()\r\n                .setQuery(query, Canguro.class).build();\r\n\r\n        //mAdapter = new CanguroAdapter(firestoreRecyclerOptions);\r\n        mAdapter = new CanguroAdapter(firestoreRecyclerOptions) {\r\n            @Override\r\n            protected void onBindViewHolder(@NonNull ViewHolder holder, int position, @NonNull Canguro canguro) {\r\n\r\n                // Poner FOTO\r\n                String img = canguro.getImg();\r\n                Picasso.get().load(img).into(holder.getImg());\r\n\r\n                holder.getNombre().setText(canguro.getNombre());\r\n                holder.getEdad().setText(String.valueOf(canguro.getEdad()) + \" años\");\r\n                holder.getPrecioHora().setText(canguro.getPrecioHora() + \" €\");\r\n\r\n                holder.getRatingBar().setRating(randomStars.nextInt(6)+1);\r\n                // Calcular la distancia\r\n                holder.getDistancia().setText(dist + \" kms\");\r\n\r\n                final String uid = canguro.getUid();\r\n                \r\n\r\n                // Obtenemos el cardview de itemCanguro que hemos instanciado en el onBindViewHolder de AdapterCangruo\r\n                holder.getCardViewCanguro().setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View view) {\r\n\r\n                        //Llevamos el uid con un Bundle a PerfilCanguroFragment\r\n                        PerfilCanguroFragment perfilCanguroFragment = new PerfilCanguroFragment();\r\n                        Bundle data = new Bundle();\r\n                        data.putString(\"uid\", uid);\r\n                        perfilCanguroFragment.setArguments(data);\r\n\r\n                        getActivity().getSupportFragmentManager().beginTransaction()\r\n                                .replace(R.id.nav_host_fragment, perfilCanguroFragment)\r\n                                .addToBackStack(null)\r\n                                .commit();\r\n\r\n                    }\r\n                });\r\n\r\n            }\r\n        };\r\n\r\n        mAdapter.notifyDataSetChanged();\r\n        recyclerViewListaCanguros.setAdapter(mAdapter);\r\n\r\n\r\n        return view;\r\n    }\r\n\r\n    @Override\r\n    public void onStart() {\r\n        super.onStart();\r\n        mAdapter.startListening();\r\n    }\r\n\r\n    public void onStop() {\r\n\r\n        super.onStop();\r\n        mAdapter.stopListening();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bbsitter/bbsitter/OpcionesMenu/Inicio/ListaCangurosFragment.java	(revision 28350bd8306d52387ecedf0bf25b70dc30374b64)
+++ app/src/main/java/com/bbsitter/bbsitter/OpcionesMenu/Inicio/ListaCangurosFragment.java	(date 1606849128267)
@@ -54,8 +54,7 @@
     private CanguroAdapter mAdapter;
 
     String dist = "0";
-
-    Random randomStars = new Random();
+    Random distancia = new Random();
 
 
     public ListaCangurosFragment() {
@@ -140,7 +139,7 @@
                 holder.getEdad().setText(String.valueOf(canguro.getEdad()) + " años");
                 holder.getPrecioHora().setText(canguro.getPrecioHora() + " €");
 
-                holder.getRatingBar().setRating(randomStars.nextInt(6)+1);
+                holder.getRatingBar().setRating(canguro.getRating());
                 // Calcular la distancia
                 holder.getDistancia().setText(dist + " kms");
 
Index: app/src/main/java/com/bbsitter/bbsitter/OpcionesMenu/Inicio/ListaValoracionCangurosFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/bbsitter/bbsitter/OpcionesMenu/Inicio/ListaValoracionCangurosFragment.java	(date 1606849128311)
+++ app/src/main/java/com/bbsitter/bbsitter/OpcionesMenu/Inicio/ListaValoracionCangurosFragment.java	(date 1606849128311)
@@ -0,0 +1,136 @@
+package com.bbsitter.bbsitter.OpcionesMenu.Inicio;
+
+import android.os.Bundle;
+
+import androidx.annotation.NonNull;
+import androidx.fragment.app.Fragment;
+import androidx.recyclerview.widget.LinearLayoutManager;
+import androidx.recyclerview.widget.RecyclerView;
+
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+
+import com.bbsitter.bbsitter.Adaptadores.CanguroAdapter;
+import com.bbsitter.bbsitter.Clases.Canguro;
+import com.bbsitter.bbsitter.OpcionesMenuCanguro.PerfilCanguroFragment;
+import com.bbsitter.bbsitter.R;
+import com.firebase.ui.firestore.FirestoreRecyclerOptions;
+import com.google.android.gms.maps.model.LatLng;
+import com.google.firebase.firestore.FirebaseFirestore;
+import com.google.firebase.firestore.Query;
+import com.squareup.picasso.Picasso;
+
+import java.util.Random;
+
+/**
+ * A simple {@link Fragment} subclass.
+ * Use the {@link ListaValoracionCangurosFragment#newInstance} factory method to
+ * create an instance of this fragment.
+ */
+public class ListaValoracionCangurosFragment extends Fragment {
+
+    LatLng MIUBICACION;
+
+    private FirebaseFirestore bbdd;
+    private RecyclerView recyclerViewListaCanguros;
+    private CanguroAdapter mAdapter;
+
+    String dist = "0";
+    Random distancia = new Random();
+
+
+    public ListaValoracionCangurosFragment() {
+        // Required empty public constructor
+    }
+
+
+    public static ListaValoracionCangurosFragment newInstance(String param1, String param2) {
+        ListaValoracionCangurosFragment fragment = new ListaValoracionCangurosFragment();
+        return fragment;
+    }
+
+    @Override
+    public void onCreate(Bundle savedInstanceState) {
+        super.onCreate(savedInstanceState);
+
+    }
+
+    @Override
+    public View onCreateView(LayoutInflater inflater, ViewGroup container,
+                             Bundle savedInstanceState) {
+        // Inflate the layout for this fragment
+        View view = inflater.inflate(R.layout.fragment_lista_canguros, container, false);
+
+        // RECYCLER VIEW ****************
+        recyclerViewListaCanguros = view.findViewById(R.id.recycler_ListaValoracionCanguros);
+        recyclerViewListaCanguros.setLayoutManager(new LinearLayoutManager(getContext()));
+        bbdd = FirebaseFirestore.getInstance();
+
+
+        Query query = bbdd.collection("canguros").orderBy("rating", Query.Direction.DESCENDING);
+
+        FirestoreRecyclerOptions<Canguro> firestoreRecyclerOptions = new FirestoreRecyclerOptions.Builder<Canguro>()
+                .setQuery(query, Canguro.class).build();
+
+        mAdapter = new CanguroAdapter(firestoreRecyclerOptions) {
+            @Override
+            protected void onBindViewHolder(@NonNull ViewHolder holder, int position, @NonNull Canguro canguro) {
+
+                // Poner FOTO
+                String img = canguro.getImg();
+                Picasso.get().load(img).into(holder.getImg());
+
+                holder.getNombre().setText(canguro.getNombre());
+                holder.getEdad().setText(String.valueOf(canguro.getEdad()) + " años");
+                holder.getPrecioHora().setText(canguro.getPrecioHora() + " €");
+
+                holder.getRatingBar().setRating(canguro.getRating());
+                // Calcular la distancia
+                holder.getDistancia().setText(dist + " kms");
+
+                final String uid = canguro.getUid();
+
+
+                // Obtenemos el cardview de itemCanguro que hemos instanciado en el onBindViewHolder de AdapterCangruo
+                holder.getCardViewCanguro().setOnClickListener(new View.OnClickListener() {
+                    @Override
+                    public void onClick(View view) {
+
+                        //Llevamos el uid con un Bundle a PerfilCanguroFragment
+                        PerfilCanguroFragment perfilCanguroFragment = new PerfilCanguroFragment();
+                        Bundle data = new Bundle();
+                        data.putString("uid", uid);
+                        perfilCanguroFragment.setArguments(data);
+
+                        getActivity().getSupportFragmentManager().beginTransaction()
+                                .replace(R.id.nav_host_fragment, perfilCanguroFragment)
+                                .addToBackStack(null)
+                                .commit();
+
+                    }
+                });
+
+            }
+        };
+
+        mAdapter.notifyDataSetChanged();
+        recyclerViewListaCanguros.setAdapter(mAdapter);
+
+
+
+        return view;
+    }
+
+    @Override
+    public void onStart() {
+        super.onStart();
+        mAdapter.startListening();
+    }
+
+    public void onStop() {
+
+        super.onStop();
+        mAdapter.stopListening();
+    }
+}
\ No newline at end of file
